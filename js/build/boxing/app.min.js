var movements=["1 2 1 2","1 2 3 2","1 2 1 4","1 2 1B 2B","1 2B 3 6","4B 6 2 3","1 1 2","1 2 3 6","1 2 1 4 5","1 2 1 6 5 6"],warning="rgb(100, 100, 0, 0.5)",danger="rgb(100, 0, 0, 0.5)",primary="rgb(0, 0, 100, 0.5)",secondary="rgb(100, 100, 100, 0.5)",grid={1:{pos:"11",badge:primary},2:{pos:"12",badge:primary},3:{pos:"10",badge:danger},4:{pos:"13",badge:danger},5:{pos:"21",badge:warning},6:{pos:"22",badge:warning},7:{pos:"01",badge:"badge-secondary"},8:{pos:"02",badge:"badge-secondary"},"1B":{pos:"41",badge:primary},"2B":{pos:"42",badge:primary},"3B":{pos:"40",badge:danger},"4B":{pos:"43",badge:danger},"5B":{pos:"51",badge:warning},"6B":{pos:"52",badge:warning}},minutes=3,timeleft=0;$(document).ready(function(){var o=function(){var e=document.getElementById("canvas");e.width=e.width;var r=e.getContext("2d"),a=new Image;a.src="/img/boxer.png",r.drawImage(a,0,0,400,800)},t=function(e){o(),$("#movement").html(e),r(e).done(function(){if(o(),0<timeleft){var e=random_value_from_array(movements);$("#movement").html("Prepare for..."),setTimeout(function(){$("#movement").html(e)},750),setTimeout(function(){t(e)},3500)}else $("#movement").html("Well done!")})},r=function(e){var r=$.Deferred(),a=e.split(" "),t=0,n=setInterval(function(){t==a.length?(clearInterval(n),r.resolve()):(o(),function(e){var r=grid[e].pos,a=grid[e].badge,t=document.getElementById("canvas");if(t.getContext){var n=t.getContext("2d");n.fillStyle=a,n.fillRect(100*r[1],100*r[0],100,100),n.fillStyle="rgb(255, 255, 255)",n.font="72px Quicksand",n.fillText(e,100*r[1]+20,10+100*r[0]+50)}}(a[t]),t++)},1e3);return r.promise()};!function(e){e&&(e=minutes);var r=60*e;$("#progressBar").attr("max",r),timeleft=r;var a=setInterval(function(){$("#progressBar").attr("value",r-timeleft),(timeleft-=1)<=0&&clearInterval(a)},1e3);t(random_value_from_array(movements))}(3)});