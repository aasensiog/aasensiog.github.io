var movements=["1 2 1 2","1 2 3 2","1 2 1 4","1 2 1B 2B","1 2B 3 6","4B 6 2 3","1 1 2","1 2 3 6","1 2 1 4 5","1 2 1 6 5 6"],warning="rgb(100, 100, 0, 0.5)",danger="rgb(100, 0, 0, 0.5)",primary="rgb(0, 0, 100, 0.5)",secondary="rgb(100, 100, 100, 0.5)",grid={1:{pos:"11",badge:primary},2:{pos:"12",badge:primary},3:{pos:"10",badge:danger},4:{pos:"13",badge:danger},5:{pos:"21",badge:warning},6:{pos:"22",badge:warning},7:{pos:"01",badge:"badge-secondary"},8:{pos:"02",badge:"badge-secondary"},"1B":{pos:"41",badge:primary},"2B":{pos:"42",badge:primary},"3B":{pos:"40",badge:danger},"4B":{pos:"43",badge:danger},"5B":{pos:"51",badge:warning},"6B":{pos:"52",badge:warning}},minutes=3,timeleft=0;$(document).ready(function(){var o=function(){var e=document.getElementById("canvas");e.width=e.width;var t=e.getContext("2d"),a=new Image;a.src="/img/boxer.png",t.drawImage(a,0,0,400,800)},n=function(e){o(),$("#movement").html(e),t(e).done(function(){if(o(),0<timeleft){var e=random_value_from_array(movements);$("#movement").html("Next movement..."),setTimeout(function(){$("#movement").html(e)},750),setTimeout(function(){n(e)},3500)}else $("#movement").html("Well done!")})},t=function(e){var t=$.Deferred(),a=e.split(" "),n=0,r=setInterval(function(){n==a.length?(clearInterval(r),t.resolve()):(o(),function(e){var t=grid[e].pos,a=grid[e].badge,n=document.getElementById("canvas");if(n.getContext){var r=n.getContext("2d");r.fillStyle=a,r.fillRect(100*t[1],100*t[0],100,100),r.fillStyle="rgb(255, 255, 255)",r.font="72px Quicksand",r.fillText(e,100*t[1]+20,10+100*t[0]+50)}}(a[n]),n++)},1e3);return t.promise()};!function(e){e&&(e=minutes);var t=60*e;$("#progressBar").attr("max",t),timeleft=t;var a=setInterval(function(){$("#progressBar").attr("value",t-timeleft),(timeleft-=1)<=0&&clearInterval(a)},1e3);n(random_value_from_array(movements))}(3)});