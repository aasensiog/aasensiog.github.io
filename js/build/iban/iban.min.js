var IBAN=function(){var t="es";function o(r,n){return r=a(r),(n=(null==n?t:n).toUpperCase())+g(98-v(r+h(n)+"00",97),2)+r}function e(r){var n=(r=a(r)).substr(0,2),t=r.substr(2,2),u=r.substr(4,20)+h(n)+t;return resto=v(u,97),1==resto}function s(r){var n=i(r=a(r)," ").split(" ");return b(n[0]+n[1])+""+b(n[3])==n[2]}function i(r,n){return null==n&&(n="-"),(r=a(r)).substr(0,4)+n+r.substr(4,4)+n+r.substr(8,2)+n+r.substr(10,10)}function c(r,n){r=a(r),null==n&&(n=" ");for(var t=[],u=0;u<6;u++)t.push(r.substr(4*u,4));return t.join(n)}function f(r){return 20==r.length}function l(r){return 24==r.length}function a(r){return r.replace(/IBAN/g,"").replace(/ /g,"").replace(/-/g,"")}function v(r,n){for(var t=r.length,u=0,e=0;e<t;e+=10){u=(u+""+r.substr(e,10))%n}return u}function b(r){for(var n=[1,2,4,8,5,10,9,7,3,6],t=0,u=(r=g(r,10),0);u<r.length;u++)t+=parseInt(r[u])*n[u];var e=t%11;return e<2?e:11-e}function g(r,n){for(r+="";r.length<n;)r="0"+r;return r}function h(r){for(var n=[],t=0;t<r.length;t++){var u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(r[t]);n.push(u<0?"-":u)}return n.join("")}return{convertir:function(r,n){var t=(r=a(r)).substr(r.length-24,24),u=r.substr(r.length-20,20);return l(r)||f(r)?l(r)&&!e(t)?"Error: IBAN incorrecto":s(u)?l(r)?c(t):c(o(u,n)):"Error: CCC incorrecto":"Error: No es IBAN ni CCC"},calcular:function(r,n){if(f(r=a(r))){var t=r.substr(8,2);return s=t,new RegExp("^(\\d{"+s.length+"})$","i").test(s)||(r=(u=a(u=r)).substr(0,8)+(b((e=i(a(u)," ").split(" "))[0]+e[1])+"")+b(e[3])+u.substr(10,10)),o(r,n)}return r;var u,e,s},validar:function(r){return l(r=a(r))?e(r):!!f(r)&&s(r)},formatear:function(r,n){return l(r=a(r))?c(r,n):f(r)?i(r,n):16==r.length?function(r,n){r=a(r),null==n&&(n=" ");for(var t=[],u=0;u<4;u++)t.push(r.substr(4*u,4));return t.join(n)}(r,n):""}}}();